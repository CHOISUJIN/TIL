# 클로저 응용예제1

``` javascript
var funcs = [];

// 1. funcs 배열에 function 넣기
for (var i = 0; i < 3; i++) {
  funcs.push(function () { console.log(i); });
}

// 2. 배열에서 함수꺼내서 호출
for (var j = 0; j < 3; j++) {
  funcs[j]();
}
```

``` javascript
[실행결과]

3
3
3
```

위 예제를 실행하기전에 0, 1, 2가 찍힐 줄 알았다. 하지만 3, 3, 3이 세번이 찍혔다. 도무지 이해가 되지않았다. 왜 for문을 돌려서 배열에 i값을 넣어서 찍는데 3이 3번 나올까? 여기저기 검색을 해봤는데 나의 궁금증을 풀어주지 못했다. 대부분의 설명은 var i는 전역변수이기 때문에 3이된다라는 말뿐이었다. 전역변수인건 알겠는데 왜 for문으로 i값을 넣는데 전역변수하고 무슨상관일까 한참을 고민했다.  그러던 중 답을 찾았다! 바로 **배열 funcs에 i값이 들어가는게 아니라 function() {} 자체가 할당돠기때문이었다. ** 코드를 대충보고 funcs 배열에 i값이 들어간다고 생각했다.  두번째 for문은 첫번째 for문이 종료된 후 실행된다.  그러므로 배열에서 함수를 꺼내서 호출하는 시점엔 변수 i의 값은 이미 3이 되어있다. funcs 배열에 담겨진 function은 스코프체인으로 전역객체에서 i를 찾게된다! 